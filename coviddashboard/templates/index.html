{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="outer-grid">
  <!-- UK column -->
  <div id="title-uk" class="title">
    <h2>UK Coronavirus Situation</h2>
    <h4>Infection rates and trends</h4>
  </div>

  <div id="cases-uk" class="inner-grid">
    <div class="graph" id="{{ids[0]}}"></div>
    <div class="number number-one">
      <p>Current</p>
      <span>{{ uk_current_cases }}</span>
      <p>7 day average</p>
    </div>
    <div class="number number-two">
      <span>{{ uk_previous_week_cases }}</span>
      <p>vs. last week</p>
    </div>
    <div class="number number-three">
      <span>{{ uk_previous_month_cases }}</span>
      <p>vs. last month</p>
    </div>
  </div>
  <div id="deaths-uk" class="inner-grid">
    <div class="graph" id="{{ids[1]}}"></div>
    <div class="number number-one">
      <p>Current</p>
      <span>{{ uk_current_deaths }}</span>
      <p>7 day average</p>
    </div>
    <div class="number number-two">
      <span>{{ uk_previous_week_deaths }}</span>
      <p>vs. last week</p>
    </div>
    <div class="number number-three">
      <span>{{ uk_previous_month_deaths }}</span>
      <p>vs. last month</p>
    </div>
  </div>


  <!-- France column -->
  <div id="title-fr" class="title">
    <h2>France Coronavirus Situation</h2>
    <h4>Infection rates and trends</h4>
  </div>
  <div id="cases-fr" class="inner-grid">
    <div class="graph" id="{{ids[2]}}"></div>
    <div class="number number-one">
      <p>Current</p>
      <span>{{ fr_current_cases }}</span>
      <p>7 day average</p>
    </div>
    <div class="number number-two">
      <span>{{ fr_previous_week_cases }}</span>
      <p>vs. last week</p>
    </div>
    <div class="number number-three">
      <span>{{ fr_previous_month_cases }}</span>
      <p>vs. last month</p>
    </div>
  </div>
  <div id="deaths-fr" class="inner-grid">
    <div class="graph" id="{{ids[3]}}"></div>
    <div class="number number-one">
      <p>Current</p>
      <span>{{ fr_current_deaths }}</span>
      <p>7 day average</p>
    </div>
    <div class="number number-two">
      <span>{{ fr_previous_week_deaths }}</span>
      <p>vs. last week</p>
    </div>
    <div class="number number-three">
      <span>{{ fr_previous_month_deaths }}</span>
      <p>vs. last month</p>
    </div>
  </div>
</div>

<script type="text/javascript">
    // plots the figure with id
    // id much match the div id above in the html
    var figures = {{ figuresJSON | safe }};
    var ids = {{ ids | safe }};
    for (var i in figures) {
      Plotly.newPlot(ids[i],
        figures[i].data,
        figures[i].layout,
        config = {responsive: true} || {});
    }

    function myFunction() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
  </script>

{% endblock %}